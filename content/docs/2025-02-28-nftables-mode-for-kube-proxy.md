---
title: NFTables mode for kube-proxy
date: '2025-02-28T00:00:00+00:00'
tags:
- kubernetes
source: Kubernetes Blog
external_url: https://kubernetes.io/blog/2025/02/28/nftables-kube-proxy/
post_kind: link
draft: false
tldr: 'NFTables mode for kube-proxy Why nftables? Part 1: data plane latency Why nftables?
  Part 2: control plane latency Why not nftables? Trying out nftables mode Future
  plans Learn more A new nftables mode for kube-proxy was introduced as an alpha feature
  in Kubernetes 1. 29.'
summary: 'NFTables mode for kube-proxy Why nftables? Part 1: data plane latency Why
  nftables? Part 2: control plane latency Why not nftables? Trying out nftables mode
  Future plans Learn more A new nftables mode for kube-proxy was introduced as an
  alpha feature in Kubernetes 1. 29. Currently in beta, it is expected to be GA as
  of 1. 33. The new mode fixes long-standing performance problems with the iptables
  mode and all users running on systems with reasonably-recent kernels are encouraged
  to try it out. (For compatibility reasons, even once nftables becomes GA, iptables
  will still be the default. ) The iptables API was designed for implementing simple
  firewalls, and has problems scaling up to support Service proxying in a large Kubernetes
  cluster with tens of thousands of Services. In general, the ruleset generated by
  kube-proxy in iptables mode has a number of iptables rules proportional to the sum
  of the number of Services and the total number of endpoints. In particular, at the
  top level of the ruleset, there is one rule to test each possible Service IP (and
  port) that a packet might be addressed to: # If the packet is addressed to 172.
  30. 0. 41:80, then jump to the chain # KUBE-SVC-XPGD46QRK7WJZT7O for further processing
  -A KUBE-SERVICES -m comment --comment "namespace1/service1:p80 cluster IP" -m tcp
  -p tcp -d 172.'
---
Open the original post â†— https://kubernetes.io/blog/2025/02/28/nftables-kube-proxy/
